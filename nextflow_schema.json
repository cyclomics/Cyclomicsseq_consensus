{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/cyclomics/cyclomicsseq_consensus/master/nextflow_schema.json",
  "title": "Cyclomics/CyclomicsSeq_consensus",
  "description": "Create consensus data for the Cyclomics CyclomicsSeq protocols, internal developer foccussed.",
  "type": "object",
  "definitions": {
    "output_options": {
      "title": "output_options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "output_dir": {
          "type": "string",
          "default": ""
        }
      },
      "required": ["output_dir"]
    },
    "input_options": {
      "title": "General settings and inputs",
      "type": "object",
      "description": "General settings and method selection",
      "default": "",
      "properties": {
        "consensus_method": {
          "type": "string",
          "description": "Consensus generation stategy, please fill the aditional settings.",
          "help_text": "Each strategy must have a submenu on the left.",
          "default": "Cygnus",
          "enum": [
            "Cycas",
            "Cyclotron",
            "Cygnus",
            "Cygnus_primed",
            "Cygnus_aligned",
            "Tidehunter"]
        },
        "read_folder": {
          "type": "string",
          "format": "file-path",
          "description": "fastq_output folder containing either fastq or fastq.gz format, usually the fastq_pass folder made by MinKnow. Can contain barcode subfolders.",
          "default": ""
        },
        "read_pattern":{
          "type": "string",
          "description": "Search pattern for fastq files.",
          "default": "**.{fq,fastq,fq.gz,fastq.gz}"
        },
        "summarize_input": {
          "type": "boolean",
          "description": "When enabled, Print a summary per sample ID ",
          "help_text": "the Sample id is the name of the folder in which the fastq is located.",
          "default": true
        },
        "summarize_output": {
          "type": "boolean",
          "description": "When enabled, Print a summary per sample ID ",
          "help_text": "the Sample id is the name of the folder in which the fastq is located.",
          "default": true
        }
      },
      "required": ["read_folder"]
    },
    "cycas_options": {
      "title": "Cycas Settings",
      "type": "object",
      "description": "Setting applicable to Cycas.",
      "default": "",
      "properties": {
        "backbone": {
          "type": "string",
          "description": "Backbone used in the CyclomicsSeq protocol.",
          "help_text": "ID of the backbone used in the lab, If set to custom please set the backbone_file option  under advanced user options to a fasta file with the sequence of the custom backbone as the only input where the name starts with `BB`.",
          "default": "BBCS",
          "enum": [
            "BB22",
            "BB25",
            "BBCS",
            "BBCR",
            "BB41",
            "BB42",
            "BB43",
            "Custom*"
          ]
        },
        "reference": {
          "type": "string",
          "format": "file-path",
          "description": "Reference genome of the sequenced sample. Ideally bwa indexed prior to the run.",
          "help_text": "reference genome of the sequenced material in fasta format. Will be used in several stages of the workflow. \n We suggest GRCh38.p14, since this has been tested to work with the Effect prediction API. Please see the readme tab for instructions to obtain this reference genome.",
          "default": ""
        }
      }
    },
    "cyclotron_options": {
      "title": "Cyclotron Settings",
      "type": "object",
      "description": "Setting applicable to Cyclotron.",
      "default": "",
      "properties": {
        "backbone": {
          "type": "string",
          "description": "Backbone used in the CyclomicsSeq protocol.",
          "help_text": "ID of the backbone used in the lab, If set to custom please set the backbone_file option  under advanced user options to a fasta file with the sequence of the custom backbone as the only input where the name starts with `BB`.",
          "default": "BBCS",
          "enum": [
            "BB22",
            "BB25",
            "BBCS",
            "BBCR",
            "BB41",
            "BB42",
            "BB43",
            "Custom*"
          ]
        }
      }
    },
    "cygnus_options": {
      "title": "Cyclotron Settings",
      "type": "object",
      "description": "Setting applicable to Cyclotron.",
      "default": "",
      "properties": {
        "no_settings_atm": {
          "type": "string",
          "description": "Dummy field.",
          "help_text": "more items will come here later.",
          "default": ""
        }
      }
    },
    "cygnus_primed_options": {
      "title": "Cygnus Primed Settings",
      "type": "object",
      "description": "Setting applicable to Cygnus, with primer sequence based rotation.",
      "default": "",
      "properties": {
        "backbone": {
          "type": "string",
          "description": "Backbone used in the CyclomicsSeq protocol.",
          "help_text": "ID of the backbone used in the lab, If set to custom please set the backbone_file option  under advanced user options to a fasta file with the sequence of the custom backbone as the only input where the name starts with `BB`.",
          "default": "BBCS",
          "enum": [
            "BB22",
            "BB25",
            "BBCS",
            "BBCR",
            "BB41",
            "BB42",
            "BB43",
            "Custom*"
          ]
        },
        "primers": {
          "type": "string",
          "format": "file-path",
          "description": "Fasta file containing the primers or amplicons.",
          "help_text": "TBD.",
          "default": ""
        }
      }
    },
    "cygnus_aligned_options": {
      "title": "Cygnus aligned Settings",
      "type": "object",
      "description": "Setting applicable to Cygnus, with alignment based rotation.",
      "default": "",
      "properties": {
        "backbone": {
          "type": "string",
          "description": "Backbone used in the CyclomicsSeq protocol.",
          "help_text": "ID of the backbone used in the lab, If set to custom please set the backbone_file option  under advanced user options to a fasta file with the sequence of the custom backbone as the only input where the name starts with `BB`.",
          "default": "BBCS",
          "enum": [
            "BB22",
            "BB25",
            "BBCS",
            "BBCR",
            "BB41",
            "BB42",
            "BB43",
            "Custom*"
          ]
        },
        "reference": {
          "type": "string",
          "format": "file-path",
          "description": "Reference genome of the sequenced sample. Ideally bwa indexed prior to the run.",
          "help_text": "reference genome of the sequenced material in fasta format. Will be used in several stages of the workflow. \n We suggest GRCh38.p14, since this has been tested to work with the Effect prediction API. Please see the readme tab for instructions to obtain this reference genome.",
          "default": ""
        }
      }
    },
    "tidehunter_options": {
      "title": "Tidehunter Primed Settings",
      "type": "object",
      "description": "Setting applicable to Tidehunter.",
      "default": "",
      "properties": {
        "backbone": {
          "type": "string",
          "description": "Backbone used in the CyclomicsSeq protocol.",
          "help_text": "ID of the backbone used in the lab, If set to custom please set the backbone_file option  under advanced user options to a fasta file with the sequence of the custom backbone as the only input where the name starts with `BB`.",
          "default": "BBCS",
          "enum": [
            "BB22",
            "BB25",
            "BBCS",
            "BBCR",
            "BB41",
            "BB42",
            "BB43",
            "Custom*"
          ]
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/output_options"
    },
    {
      "$ref": "#/definitions/input_options"
    },
    {
      "$ref": "#/definitions/pipeline_options"
    },
    {
      "$ref": "#/definitions/advanced_user_options"
    },
    {
      "$ref": "#/definitions/advanced_variants_validate"
    },
    {
      "$ref": "#/definitions/advanced_variants_freebayes"
    }
  ]
}
